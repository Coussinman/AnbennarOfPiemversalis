namespace = religious_leagues
namespace = dalcabba_victory
namespace = jadd_victory

#Dalcabba Emperor Won
country_event = {
	id = dalcabba_victory.0
	title = dalcabba_victory.0.t
	desc = dalcabba_victory.0.d
	picture = ADEANIC_WAR_eventPicture
	major = yes
	is_triggered_only = yes
	trigger = {
		has_dlc = "Art of War"
		hre_religion = dalcabba
	}
	immediate = {
		hidden_effect = {
			set_global_flag = league_war_complete
			set_hre_religion_locked = yes
			emperor = {
				country_event = {
					id = dalcabba_victory.3
				}
			}
			religious_supremacy_on_victory = yes
		}
	}
	option = {
		name = dalcabba_victory.0.a
		tooltip = {
			set_hre_heretic_religion = corinite
			religious_supremacy_tooltip_effect = {
				religion = dalcabba
			}
		}
	}
}
#Dalcabba Upstart Won
country_event = {
	id = dalcabba_victory.1
	title = dalcabba_victory.1.t
	desc = dalcabba_victory.1.d
	picture = ADEANIC_WAR_eventPicture
	major = yes
	is_triggered_only = yes
	trigger = {
		has_dlc = "Art of War"
		hre_heretic_religion = dalcabba
		religious_supremacy_cooldown = yes
	}
	immediate = {
		set_country_flag = hre_religion_changed
		hidden_effect = {
			set_global_flag = league_war_complete
			set_hre_religion_treaty = yes
			set_hre_heretic_religion = emperor
			set_hre_religion = dalcabba
			set_hre_religion_locked = yes
			religious_supremacy_on_victory = yes
		}
	}
	option = {
		name = dalcabba_victory.1.a
		tooltip = {
			set_hre_heretic_religion = emperor
			religious_supremacy_tooltip_effect = {
				religion = dalcabba
			}
		}
	}
}
#Dalcabba Win Without War
country_event = {
	id = dalcabba_victory.2
	title = dalcabba_victory.2.t
	desc = dalcabba_victory.2.d
	picture = DIET_eventPicture
	major = yes
	fire_only_once = yes
	trigger = {
		warless_victory_trigger = {
			religion = dalcabba
			dalcabba = yes
		}
	}
	mean_time_to_happen = {
		months = 12
	}
	immediate = {
		hidden_effect = {
			set_global_flag = league_war_complete
			religious_supremacy_on_victory = yes
		}
	}
	option = {
		name = dalcabba_victory.2.a
		set_hre_religion_locked = yes
	}
}

#Jadd Upstart won
country_event = {
	id = jadd_victory.1
	title = jadd_victory.1.t
	desc = jadd_victory.1.d
	picture = ADEANIC_WAR_eventPicture
	major = yes
	is_triggered_only = yes
	trigger = {
		has_dlc = "Art of War"
		hre_heretic_religion = the_jadd
		religious_supremacy_cooldown = yes
	}
	immediate = {
		set_country_flag = hre_religion_changed
		hidden_effect = {
			set_global_flag = league_war_complete
			set_hre_religion_treaty = yes
			set_hre_heretic_religion = emperor
			set_hre_religion = the_jadd
			set_hre_religion_locked = yes
			religious_supremacy_on_victory = yes
		}
	}
	option = {
		name = jadd_victory.1.a
		tooltip = {
			set_hre_heretic_religion = emperor
			religious_supremacy_tooltip_effect = {
				religion = the_jadd
			}
		}
		AB2 = {
			country_event = {
				id = flavor_jaherkost.19
			}
			8 = {
				add_trade_modifier = {
					who = AB2
					duration = -1
					power = 50
					key = jadd_empire
				}
			}
		}
		custom_tooltip = jadd_victory.1.a_tt
		hidden_effect = {
			every_known_country = {
				limit = {
					is_part_of_hre = yes
					NOT = {
						religion = the_jadd
					}
				}
				random = {
					chance = 50
					change_religion = the_jadd
					add_country_modifier = {
						name = jadd_conversion_zeal
						duration = 3650
					}
				}
			}
		}
	}
}

#Adeanics Win and get modifiers to stamp out Adeanism/Corinism, including removing centers
country_event = {
	id = dalcabba_victory.3
	title = dalcabba_victory.3.t
	desc = dalcabba_victory.3.d
	picture = VIKING_KING_eventPicture
	major = yes
	is_triggered_only = yes
	trigger = {
		has_dlc = "Art of War"
	}
	option = {
		name = dalcabba_victory.3.b
		religious_supremacy_provincial_modifier = {
			religion = dalcabba
			dalcabba = yes
		}
	}
}



#Adeanic Emperor Won
country_event = {
	id = religious_leagues.1
	title = religious_leagues.1.t
	desc = religious_leagues.1.d
	picture = ADEANIC_WAR_eventPicture
	major = yes
	is_triggered_only = yes
	trigger = {
		has_dlc = "Art of War"
		hre_religion = regent_court
	}
	immediate = {
		hidden_effect = {
			set_global_flag = league_war_complete
			set_hre_religion_locked = yes
			emperor = {
				country_event = {
					id = religious_leagues.9
				}
			}
			religious_supremacy_on_victory = yes
		}
	}
	option = {
		name = religious_leagues.1.a
		tooltip = {
			set_hre_heretic_religion = corinite
			religious_supremacy_tooltip_effect = {
				religion = regent_court
			}
		}
	}
}
#Adeanic Upstart Won
country_event = {
	id = religious_leagues.3
	title = religious_leagues.3.t
	desc = religious_leagues.3.d
	picture = ADEANIC_WAR_eventPicture
	major = yes
	is_triggered_only = yes
	trigger = {
		has_dlc = "Art of War"
		hre_heretic_religion = regent_court
		religious_supremacy_cooldown = yes
	}
	immediate = {
		set_country_flag = hre_religion_changed
		hidden_effect = {
			set_global_flag = league_war_complete
			set_hre_religion_treaty = yes
			set_hre_heretic_religion = corinite
			set_hre_religion = regent_court
			set_hre_religion_locked = yes
			religious_supremacy_on_victory = yes
			emperor = {
				country_event = {
					id = religious_leagues.109 #helper points to .9
					days = 30
				}
			}
		}
	}
	option = {
		name = religious_leagues.3.a
		tooltip = {
			set_hre_heretic_religion = corinite
			religious_supremacy_tooltip_effect = {
				religion = regent_court
			}
		}
	}
}
#Adeanic Win Without War
country_event = {
	id = religious_leagues.6
	title = religious_leagues.6.t
	desc = religious_leagues.6.d
	picture = DIET_eventPicture
	major = yes
	fire_only_once = yes
	trigger = {
		warless_victory_trigger = {
			religion = regent_court
			regent_court = yes
		}
	}
	mean_time_to_happen = {
		months = 12
	}
	immediate = {
		hidden_effect = {
			set_global_flag = league_war_complete
			religious_supremacy_on_victory = yes
		}
	}
	option = {
		name = religious_leagues.6.a
		set_hre_religion_locked = yes
	}
}
#Adeanics Win and get modifiers to stamp out Corinism, including removing centers
country_event = {
	id = religious_leagues.9
	title = religious_leagues.9.t
	desc = religious_leagues.9.d
	picture = VIKING_KING_eventPicture
	major = yes
	is_triggered_only = yes
	trigger = {
		has_dlc = "Art of War"
	}
	option = {
		name = religious_leagues.9.b
		religious_supremacy_provincial_modifier = {
			religion = regent_court
			regent_court = yes
		}
		#West Dameshead reform center
		if = {
			limit = {
				43 = {
					owner = {
						religion = regent_court
					}
				}
			}
			43 = {
				change_religion = regent_court
				add_reform_center = regent_court
			}
		}
		else_if = {
			limit = {
				10 = {
					owner = {
						religion = regent_court
					}
				}
			}
			10 = {
				change_religion = regent_court
				add_reform_center = regent_court
			}
		}
		else_if = {
			limit = {
				151 = {
					owner = {
						religion = regent_court
					}
				}
			}
			151 = {
				change_religion = regent_court
				add_reform_center = regent_court
			}
		}
		else = {
			random_province = {
				limit = {
					religion = regent_court
					region = west_dameshead_region
					owner = {
						religion = regent_court
					}
				}
				add_reform_center = regent_court
			}
		}
		#Damescrown reform center
		if = {
			limit = {
				249 = {
					owner = {
						religion = regent_court
					}
				}
			}
			249 = {
				change_religion = regent_court
				add_reform_center = regent_court
			}
		}
		else_if = {
			limit = {
				234 = {
					owner = {
						religion = regent_court
					}
				}
			}
			234 = {
				change_religion = regent_court
				add_reform_center = regent_court
			}
		}
		else_if = {
			limit = {
				915 = {
					owner = {
						religion = regent_court
					}
				}
			}
			915 = {
				change_religion = regent_court
				add_reform_center = regent_court
			}
		}
		else = {
			random_province = {
				limit = {
					religion = regent_court
					region = esmaria_region
					owner = {
						religion = regent_court
					}
				}
				add_reform_center = regent_court
			}
		}
	}
}
#Helper Event Adeanic
country_event = {
	id = religious_leagues.109
	title = religious_leagues.109.t
	desc = religious_leagues.109.d
	picture = KING_SICK_IN_BED_eventPicture
	is_triggered_only = yes
	hidden = yes
	trigger = {
		has_dlc = "Art of War"
	}
	immediate = {
		emperor = {
			country_event = {
				id = religious_leagues.9
			}
		}
	}
	option = {
		name = religious_leagues.109.a
	}
}



#Corinite Emperor won
country_event = {
	id = religious_leagues.8
	title = religious_leagues.8.t
	desc = religious_leagues.8.d
	picture = CORINITE_WAR_eventPicture
	major = yes
	is_triggered_only = yes
	trigger = {
		has_dlc = "Art of War"
		hre_religion = corinite
	}
	immediate = {
		hidden_effect = {
			set_global_flag = league_war_complete
			set_hre_religion_locked = yes
			emperor = {
				country_event = {
					id = religious_leagues.19
				}
			}
			religious_supremacy_on_victory = yes
		}
	}
	option = {
		name = religious_leagues.8.a
		tooltip = {
			set_hre_heretic_religion = regent_court
			religious_supremacy_tooltip_effect = {
				religion = corinite
			}
		}
	}
}
#Corinite Upstart Won
country_event = {
	id = religious_leagues.2
	title = religious_leagues.2.t
	desc = religious_leagues.2.d
	picture = CORINITE_WAR_eventPicture
	major = yes
	is_triggered_only = yes
	trigger = {
		has_dlc = "Art of War"
		hre_heretic_religion = corinite
		religious_supremacy_cooldown = yes
	}
	immediate = {
		set_country_flag = hre_religion_changed
		hidden_effect = {
			set_global_flag = league_war_complete
			set_hre_religion_treaty = yes
			set_hre_heretic_religion = regent_court
			set_hre_religion = corinite
			set_hre_religion_locked = yes
			religious_supremacy_on_victory = yes
			emperor = {
				country_event = {
					id = religious_leagues.18
					days = 30
				}
			}
		}
	}
	option = {
		name = religious_leagues.2.a
		tooltip = {
			set_hre_heretic_religion = regent_court
			religious_supremacy_tooltip_effect = {
				religion = corinite
			}
		}
		if = {
			limit = {
				has_dlc = "Emperor"
				has_global_flag = incident_reformer_dissension_can_happen
			}
			custom_tooltip = incident_reformer_dissension_can_happen_tt
			set_imperial_incident = incident_reformer_dissension
		}
	}
	after = {
		1 = {
			set_variable = {
				which = non_reformed_hre_member_provinces
				value = 0
			}
			set_variable = {
				which = reformed_hre_member_provinces
				value = 0
			}
			set_variable = {
				which = reformed_others_member_provinces_ratio
				value = 0
			}
		}
	}
}
#Corinites Win without war
country_event = {
	id = religious_leagues.7
	title = religious_leagues.7.t
	desc = religious_leagues.7.d
	picture = DIET_eventPicture
	major = yes
	fire_only_once = yes
	trigger = {
		warless_victory_trigger = {
			religion = corinite
			corinite = yes
		}
	}
	mean_time_to_happen = {
		months = 12
	}
	immediate = {
		hidden_effect = {
			set_global_flag = league_war_complete
			religious_supremacy_on_victory = yes
		}
	}
	option = {
		name = religious_leagues.7.a
		set_hre_religion_locked = yes
	}
}
#Corinite League bonus, not used lol?
country_event = {
	id = religious_leagues.12
	title = religious_leagues.12.t
	desc = religious_leagues.12.d
	picture = CORINITE_WAR_eventPicture
	is_triggered_only = yes
	trigger = {
		religion = corinite
		is_in_league_war = yes
		in_or_leading_corinite_league = yes
		NOT = {
			has_country_modifier = corinite_during_active_league_war
		}
	}
	option = {
		name = religious_leagues.12.a
		add_country_modifier = {
			name = corinite_during_active_league_war
			duration = 9125
		}
	}
}
#Corinites Win and get modifiers to stamp out Adeanism
country_event = {
	id = religious_leagues.19
	title = religious_leagues.19.t
	desc = religious_leagues.19.d
	picture = VIKING_KING_eventPicture
	major = yes
	is_triggered_only = yes
	trigger = {
		has_dlc = "Art of War"
	}
	option = {
		name = religious_leagues.19.a
		religious_supremacy_provincial_modifier = {
			religion = corinite
			corinite = yes
		}
	}
}
#Helper Event Corinite
country_event = {
	id = religious_leagues.18
	title = religious_leagues.18.t
	desc = religious_leagues.18.d
	picture = KING_SICK_IN_BED_eventPicture
	is_triggered_only = yes
	hidden = yes
	trigger = {
		has_dlc = "Art of War"
	}
	immediate = {
		emperor = {
			country_event = {
				id = religious_leagues.19
			}
		}
	}
	option = {
		name = religious_leagues.18.a
	}
}



#Peace of Westphalia
country_event = {
	id = religious_leagues.4
	title = religious_leagues.4.t
	desc = religious_leagues.4.d
	picture = ADEANIC_WAR_eventPicture
	major = yes
	is_triggered_only = yes
	trigger = {
		has_dlc = "Art of War"
		OR = {
			NOT = {
				has_global_flag = sugamber_three_war
			}
			had_global_flag = {
				flag = sugamber_three_war
				days = 30
			}
		}
	}
	immediate = {
		hidden_effect = {
			set_hre_religion_treaty = yes
			set_global_flag = peace_of_esmaria
			every_known_country = {
				country_event = {
					id = religious_leagues.11
				}
			}
		}
	}
	option = {
		name = religious_leagues.4.a
		tooltip = {
			set_hre_religion_treaty = yes
		}
	}
}

#Religion Triumphant Modifier within the Empire
country_event = {
	id = religious_leagues.100
	title = religious_leagues.100.t
	desc = {
		trigger = { hre_religion = regent_court }
		desc = religious_leagues.100.d
	}
	desc = {
		trigger = { hre_religion = corinite }
		desc = religious_leagues.100.e
	}
	desc = {
		trigger = { hre_religion = dalcabba }
		desc = religious_leagues.100.f
	}
	picture = {
		trigger = { hre_religion = corinite }
		picture = CORINITE_WAR_eventPicture
	}
	picture = {
		trigger = { hre_religion = regent_court }
		picture = ADEANIC_WAR_eventPicture
	}
	picture = {
		trigger = { hre_religion = dalcabba }
		picture = ADEANIC_WAR_eventPicture
	}
	is_triggered_only = yes
	trigger = {
		has_dlc = "Art of War"
		has_global_flag = league_war_complete
	}
	option = {
		name = religious_leagues.100.a
		religious_supremacy_update_country_modifier = yes
	}
}

#Religious Leagues Form
country_event = {
	id = religious_leagues.5
	title = religious_leagues.5.t
	desc = {
		trigger = { religion = regent_court }
		desc = religious_leagues.5.da
	}
	desc = {
		trigger = { religion = corinite }
		desc = religious_leagues.5.db
	}
	desc = {
		trigger = { religion = dalcabba }
		desc = religious_leagues.5.dc
	}
	picture = CORINITE_WAR_eventPicture
	major = yes
	fire_only_once = yes
	trigger = {
		has_dlc = "Art of War"
		NOT = {
			has_global_flag = evangelical_union_happened
			hre_reform_passed = erbkaisertum
			has_global_flag = great_peasants_war_flag
		}
		hre_leagues_enabled = no
		hre_religion_locked = no
		is_emperor = yes
		OR = {
			is_year = 1550
			has_global_flag = crimson_deluge_is_over
		}
		OR = {
			AND = {
				religion = regent_court
				any_known_country = {
					is_elector = yes
					OR = {
						religion = corinite
						religion = ravelian
						religion = dalcabba
					}
					is_free_or_tributary_trigger = yes
				}
			}
			AND = {
				religion = corinite
				any_known_country = {
					is_elector = yes
					OR = {
						religion = regent_court
						religion = ravelian
						religion = dalcabba
					}
					is_free_or_tributary_trigger = yes
				}
			}
			AND = {
				religion = dalcabba
				any_known_country = {
					is_elector = yes
					OR = {
						religion = regent_court
						religion = corinite
						religion = dalcabba
					}
					is_free_or_tributary_trigger = yes
				}
			}
		}
	}
	mean_time_to_happen = {
		months = 60
		modifier = {
			factor = 0.5
			is_year = 1550
		}
		modifier = {
			factor = 0.5
			is_year = 1560
		}
		modifier = {
			factor = 0.5
			is_year = 1570
		}
		modifier = {
			factor = 0.5
			is_year = 1580
		}
		modifier = {
			factor = 0.5
			is_year = 1590
		}
		modifier = {
			factor = 0.5
			is_year = 1600
		}
	}
	option = {
		name = religious_leagues.5.a
		if = {
			limit = {
				religion = corinite
			}
			set_hre_heretic_religion = regent_court
			set_hre_religion = corinite
		}
		else_if = {
			limit = {
				religion = dalcabba
			}
			set_hre_heretic_religion = corinite
			set_hre_religion = dalcabba
		}
		enable_hre_leagues = yes
		set_global_flag = evangelical_union_happened
	}
}
#Religion Triumphant Modifier outside the Empire
country_event = {
	id = religious_leagues.11
	title = religious_leagues.11.t
	desc = religious_leagues.11.d
	picture = KING_SICK_IN_BED_eventPicture
	is_triggered_only = yes
	hidden = yes
	trigger = {
		has_dlc = "Art of War"
		has_global_flag = league_war_complete
	}
	immediate = {
		hidden_effect = {
			remove_country_modifier = hre_dominant_regent_court
			remove_country_modifier = hre_dominant_corinite
			remove_country_modifier = hre_dominant_ravelian
			remove_country_modifier = hre_dominant_dalcabba
		}
	}
	option = {
		name = religious_leagues.11.a
		religious_supremacy_update_country_modifier = yes
	}
}

#Set religious peace at start
country_event = {
	id = religious_leagues.10
	title = religious_leagues.10.t
	desc = religious_leagues.10.d
	picture = KING_SICK_IN_BED_eventPicture
	is_triggered_only = yes
	fire_only_once = yes
	hidden = yes
	trigger = {
		has_dlc = "Art of War"
		is_emperor = yes
	}
	option = {
		name = religious_leagues.10.a
		set_hre_religion_treaty = yes
	}
}